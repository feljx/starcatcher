!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t,s){const n=s(5),r=class{constructor(e,t){this.container=this.c=e,this.children=t,this.state=this.s={}}clear(){for(const e of this.children)this.clearView(e)}render(){for(const e of this.children)this.clearView(e),this.renderView(e)}clearView(e){this.s[e.name]&&(this.s[e.name].remove(),this.s[e.name]=void 0)}renderView(e){this.clearView(e);const t=e();this.container.appendChild(t),this.s[e.name]=t}};e.exports.Context=r,e.exports.RenderingContext=r;const i=e=>document.createElement(e);e.exports.el=i;const o=(e,t)=>{if(!t)throw new Error('"styles" object must be defined');const s=document.createElement(e);return s.className=n(t),s};e.exports.styled=o;e.exports.add_class=(e,t)=>e.className+=" "+t;e.exports.remove_class=(e,t)=>e.className=e.className.replace(t,"");e.exports.style=(e,t)=>{""===e.className?e.className+=n(t):e.className+=" "+n(t)};e.exports.restyle=(e,t)=>{e.className=n(t)};e.exports.add_text=(e,t)=>e.appendChild(document.createTextNode(t));e.exports.remove_text=(e,t)=>{e&&("string"==typeof t?e.textContent=e.textContent.replace(t,""):t&&3===t.nodeType?e.removeChild(t):e.textContent=void 0)};e.exports.div=e=>(e?o:i)("div",e);e.exports.span=e=>(e?o:i)("span",e);e.exports.h1=e=>(e?o:i)("h1",e);e.exports.h2=e=>(e?o:i)("h2",e);e.exports.p=e=>(e?o:i)("p",e);e.exports.input=e=>(e?o:i)("input",e);e.exports.button=e=>(e?o:i)("button",e)},function(e,t,s){"use strict";s.r(t),s.d(t,"STARRYFIRE",(function(){return n})),s.d(t,"STARRYGOLD",(function(){return r})),s.d(t,"STARRYNIGHT",(function(){return i})),s.d(t,"CELL_SIZE",(function(){return o})),s.d(t,"ZOOMED_FONT_SIZE",(function(){return a})),s.d(t,"body_styles",(function(){return c})),s.d(t,"title_styles",(function(){return d})),s.d(t,"game_styles",(function(){return u})),s.d(t,"sidebar_styles",(function(){return h})),s.d(t,"smile_styles",(function(){return f})),s.d(t,"grid_styles",(function(){return _})),s.d(t,"cell_styles",(function(){return m})),s.d(t,"open_cell_styles",(function(){return p})),s.d(t,"flagged_cell_styles",(function(){return g}));const n="#b50060",r="#efde73",i="#1d2856",o=2..toString()+"rem",a=3..toString()+"rem",l={width:o,height:o,fontSize:"1.8rem",fontFamily:"Arial",fontWeight:"bold",textAlign:"center",cursor:"pointer","-ms-user-select":"none","-moz-user-select":"none","-webkit-user-select":"none",userSelect:"none"},c={backgroundColor:i,fontFamily:"Times, serif",display:"flex",flexDirection:"column",alignItems:"center",alignContent:"flex-start","> *":{marginTop:"1rem"}},d={color:r,fontSize:"4rem",marginTop:"2rem"},u={color:r,display:"flex",marginLeft:"-10rem"},h={width:"6rem",fontSize:"3.2rem",display:"flex",flexDirection:"column",alignItems:"flex-start",marginRight:"4rem","> *":{padding:"0.6rem"},"> *:not(:first-child)":{marginTop:"3rem"}},f={padding:"0.6rem",cursor:"pointer",":hover":{background:r,color:i}},_={color:r,display:"grid",gridGap:"0.3rem",gridTemplateColumns:"repeat(15, 1fr)",gridTemplateColumns:"repeat(15, 1fr)"},m={...l,background:r,color:i,":hover":{color:r,background:n}},p={...l,background:i,color:r},g={...l,background:n,color:r}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(6),i=s(1),o=s(7);t.STAR="*",t.FLAG="#";const a=e=>{const t=e.target.field;t instanceof r.default&&t.handle_click(e.button)};t.default=class{constructor(e,t,s){this.cols=e,this.rows=t,this.prob=s,this.stars_left=0,this.fields_left=0,this.game_over=!1,this.container=n.div(i.game_styles),this.grid=n.div(i.grid_styles),this.create_board(),this.solve_board(),this.sidebar=new o.default(this),this.container.appendChild(this.sidebar.container),this.container.appendChild(this.grid),this.container.oncontextmenu=e=>e.preventDefault(),this.grid.addEventListener("mousedown",a),this.end=new Promise(e=>{this.resolve_game=e})}create_board(){this.board=Array.from({length:this.cols*this.rows},(e,s)=>{const n=this.xy(s),i=Math.random()<this.prob,o=i?t.STAR:void 0;i?++this.stars_left:++this.fields_left;const a=new r.default(this,n,o);return this.grid.appendChild(a.container),a})}xy(e){return[e%this.cols+1,Math.trunc(e/this.cols)+1]}solve_board(){for(const e of this.board){if(e.is_star)continue;const t=this.nearby(e).filter(e=>e.is_star).length;t>0&&(e.val=t.toString())}}get_field(e,t){if(e<1||t<1)return;if(e>this.cols||t>this.rows)return;const s=--e+--t*this.cols;return this.board[s]}open_field(e){if(!e.is_flagged)if(e.is_star)this.end_game(!1),e.open();else{let t=[e];for(;t.length>0;){const e=t.pop();if(!e.is_open&&(e.open(),e.is_empty)){const s=this.nearby(e);t.push(...s)}}}}nearby(e){const[t,s]=e.pos,n=[];for(let e=0;e<9;++e)if(4!==e){const r=this.get_field(t-1+Math.trunc(e/3),s-1+e%3);r&&n.push(r)}return n}end_game(e){this.game_over=!0,e?this.sidebar.brighten_smile():this.sidebar.sadden_smile(),this.grid.removeEventListener("mousedown",a),this.resolve_game(e)}},document.addEventListener("keydown",e=>{if("KeyF"===e.code){const e=document.querySelectorAll(":hover"),t=e[e.length-1];t.field instanceof r.default&&(t.field.game.game_over||t.field.flag())}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(4),r=s(0),i=s(1),o=s(2);r.style(document.body,i.body_styles);const a=r.h1(i.title_styles);r.add_text(a,"starcatcher"),n.default(a).to(document.body);let l;const c=()=>{l=new o.default(15,15,.15),l.sidebar.attach_smile_click(()=>{l.container.remove(),c()}),document.body.appendChild(l.container)};c()},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(...e){return{to:function(t){const s=t;for(const t of e){const e=t instanceof HTMLElement?t:t.container;(s instanceof HTMLElement?s:s.container).appendChild(e)}}}}},function(e,t,s){"use strict";var n={},r="x",i=[],o=function(e){return i.push(e)},a=function(e,t){return t?t+"{"+e+"}":e},l=function(e,t,s){return"."+e+"{"+(t.replace(/[A-Z]|^ms/g,"-$&").toLowerCase()+":")+s+"}"},c=function(e){return e.replace(/&/g,"")},d=function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments[2];return Object.keys(t).map((function(u){var h=t[u];if(null===h)return"";if("object"==typeof h){var f=/^@/.test(u)?u:null;return e(h,f?s:s+u,f||d)}var _=u+h+s+d;if(n[_])return n[_];var m=r+i.length.toString(36);return o(a(l(m+c(s),u,h),d)),n[_]=m,m})).join(" ")};if(e.exports=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.map((function(e){return d(e)})).join(" ").trim()},e.exports.css=function(){return i.sort().join("")},e.exports.reset=function(){for(n={};i.length;)i.pop()},e.exports.prefix=function(e){return r=e},"undefined"!=typeof document){var u=document.head.appendChild(document.createElement("style")).sheet;o=function(e){i.push(e),u.insertRule(e,u.cssRules.length)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2),i=s(1);t.default=class{constructor(e,t,s){this.game=e,this.pos=t,this.val=s,this.container=n.span(i.cell_styles),this.is_flagged=!1,this.is_open=!1,this.container.field=this}get is_star(){return this.val===r.STAR}get is_empty(){return void 0===this.val}get has_nearby_stars(){return!isNaN(Number(this.val))}flag(){this.is_open||(this.is_flagged?(n.restyle(this.container,i.cell_styles),n.remove_text(this.container),++this.game.stars_left):(n.restyle(this.container,i.flagged_cell_styles),n.add_text(this.container,r.FLAG),--this.game.stars_left),this.game.sidebar.update_counter(),this.is_flagged=!this.is_flagged)}open(){this.is_open||this.is_flagged||(n.restyle(this.container,i.open_cell_styles),this.is_open=!0,--this.game.fields_left,this.is_empty||(n.add_text(this.container,this.val),this.is_star&&(this.container.style.background=i.STARRYFIRE,this.container.style.color=i.STARRYNIGHT,this.container.style.fontSize=i.ZOOMED_FONT_SIZE)),0===this.game.fields_left&&this.game.end_game(!0))}safe_reveal(){const e=this.game.nearby(this);if(e.filter(e=>e.is_flagged).length===Number(this.val))for(const t of e)this.game.open_field(t)}handle_click(e){this.is_open&&this.has_nearby_stars?this.safe_reveal():(0===e&&this.game.open_field(this),2===e&&this.flag())}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(1);t.default=class{constructor(e){this.game=e,this.container=n.div(r.sidebar_styles),this.smile=n.div(r.smile_styles),this.star_counter=n.div(),n.add_text(this.smile,"; >"),this.smile.style.fontWeight="bold",this.update_counter(),this.container.appendChild(this.smile),this.container.appendChild(this.star_counter)}attach_smile_click(e){this.smile.addEventListener("click",t=>{e()})}_update_smile(e){n.remove_text(this.smile),n.add_text(this.smile,e),n.remove_text(this.star_counter)}brighten_smile(){this._update_smile("<3")}sadden_smile(){this._update_smile(": <")}update_counter(){n.remove_text(this.star_counter),n.add_text(this.star_counter,this.game.stars_left.toString())}}}]);